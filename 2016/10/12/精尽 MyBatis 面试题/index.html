<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MyBatis é¢è¯•é¢˜ | æ¶‚æ–‡æ–Œ</title><meta name="description" content="ç²¾å°½ MyBatis é¢è¯•é¢˜ä»¥ä¸‹é¢è¯•é¢˜ï¼ŒåŸºäºç½‘ç»œæ•´ç†ï¼Œå’Œè‡ªå·±ç¼–è¾‘ã€‚å…·ä½“å‚è€ƒçš„æ–‡ç« ï¼Œä¼šåœ¨æ–‡æœ«ç»™å‡ºæ‰€æœ‰çš„é“¾æ¥ã€‚ å¦‚æœèƒ–å‹æœ‰è‡ªå·±çš„ç–‘é—®ï¼Œæ¬¢è¿åœ¨æ˜Ÿçƒæé—®ï¼Œæˆ‘ä»¬ä¸€èµ·æ•´ç†åŠåŠçš„ MyBatis é¢è¯•é¢˜çš„å¤§ä¿å¥ã€‚ è€Œé¢˜ç›®çš„éš¾åº¦ï¼Œè‰¿è‰¿å°½é‡æŒ‰ç…§ä»å®¹æ˜“åˆ°å›°éš¾çš„é¡ºåºï¼Œé€æ­¥ä¸‹å»ã€‚ MyBatis ç¼–ç¨‹æ­¥éª¤ åˆ›å»º SqlSessionFactory å¯¹è±¡ã€‚ é€šè¿‡ SqlSessionFactory è·å– SqlSessio"><meta name="keywords" content="é¢è¯•,MyBatis"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2016/10/12/%E7%B2%BE%E5%B0%BD%20MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="MyBatis é¢è¯•é¢˜"><meta property="og:url" content="http://example.com/2016/10/12/%E7%B2%BE%E5%B0%BD%20MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/"><meta property="og:site_name" content="æ¶‚æ–‡æ–Œ"><meta property="og:description" content="ç²¾å°½ MyBatis é¢è¯•é¢˜ä»¥ä¸‹é¢è¯•é¢˜ï¼ŒåŸºäºç½‘ç»œæ•´ç†ï¼Œå’Œè‡ªå·±ç¼–è¾‘ã€‚å…·ä½“å‚è€ƒçš„æ–‡ç« ï¼Œä¼šåœ¨æ–‡æœ«ç»™å‡ºæ‰€æœ‰çš„é“¾æ¥ã€‚ å¦‚æœèƒ–å‹æœ‰è‡ªå·±çš„ç–‘é—®ï¼Œæ¬¢è¿åœ¨æ˜Ÿçƒæé—®ï¼Œæˆ‘ä»¬ä¸€èµ·æ•´ç†åŠåŠçš„ MyBatis é¢è¯•é¢˜çš„å¤§ä¿å¥ã€‚ è€Œé¢˜ç›®çš„éš¾åº¦ï¼Œè‰¿è‰¿å°½é‡æŒ‰ç…§ä»å®¹æ˜“åˆ°å›°éš¾çš„é¡ºåºï¼Œé€æ­¥ä¸‹å»ã€‚ MyBatis ç¼–ç¨‹æ­¥éª¤ åˆ›å»º SqlSessionFactory å¯¹è±¡ã€‚ é€šè¿‡ SqlSessionFactory è·å– SqlSessio"><meta property="og:image" content="http://cdn.tuwenbin.vip/1557628307196cddab5c76e5e5229b884f2e10f3.jpg%401320w_744h.jpg"><meta property="article:published_time" content="2016-10-12T10:38:45.000Z"><meta property="article:modified_time" content="2020-09-28T02:23:03.141Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime: '',
  date_suffix: {"one_hour":"Just","hours":"hours ago","day":"days ago"},
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-09-28 10:23:03'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.0.0/styles/vs.min.css" rel="stylesheet"><link rel="stylesheet" href="/self/duotone.css"/><meta name="generator" content="Hexo 5.1.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/qq.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">60</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">20</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">26</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç±¤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B2%BE%E5%B0%BD-MyBatis-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">ç²¾å°½ MyBatis é¢è¯•é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E7%BC%96%E7%A8%8B%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.1.</span> <span class="toc-text">MyBatis ç¼–ç¨‹æ­¥éª¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%92%8C-%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">#&amp;#123;&amp;#125; å’Œ $&amp;#123;&amp;#125; çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%93%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7%E5%90%8D%E5%92%8C%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E4%B8%80%E6%A0%B7-%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XML-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E9%99%A4%E4%BA%86%E5%B8%B8%E8%A7%81%E7%9A%84-select-insert-update-delete%E6%A0%87-%E7%AD%BE%E4%B9%8B%E5%A4%96%EF%BC%8C%E8%BF%98%E6%9C%89%E5%93%AA%E4%BA%9B%E6%A0%87%E7%AD%BE%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select | insert | update | deleteæ ‡ ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E5%8A%A8%E6%80%81-SQL-%E6%98%AF%E5%81%9A%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%A8%E6%80%81-SQL-%EF%BC%9F%E8%83%BD%E7%AE%80%E8%BF%B0%E4%B8%80%E4%B8%8B%E5%8A%A8%E6%80%81-SQL-%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%E5%90%97%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">Mybatis åŠ¨æ€ SQL æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€ SQL ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€ SQL çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%AD%EF%BC%8C%E9%80%9A%E5%B8%B8%E4%B8%80%E4%B8%AA-XML-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%EF%BC%8C%E9%83%BD%E4%BC%9A%E5%86%99%E4%B8%80%E4%B8%AA-Mapper-%E6%8E%A5%E5%8F%A3%E4%B8%8E%E4%B9%8B%E5%AF%B9%E5%BA%94%E3%80%82%E8%AF%B7%E9%97%AE%EF%BC%8C%E8%BF%99%E4%B8%AA-Mapper-%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9FMapper-%E6%8E%A5%E5%8F%A3%E9%87%8C%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8F%82%E6%95%B0%E4%B8%8D%E5%90%8C%E6%97%B6%EF%BC%8C%E6%96%B9%E6%B3%95%E8%83%BD%E9%87%8D%E8%BD%BD%E5%90%97%EF%BC%9F"><span class="toc-number">1.6.</span> <span class="toc-text">æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Mapper æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mapper-%E6%8E%A5%E5%8F%A3%E7%BB%91%E5%AE%9A%E6%9C%89%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F-%E5%88%86%E5%88%AB%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84"><span class="toc-number">1.7.</span> <span class="toc-text">Mapper æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼,åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E7%9A%84-XML-Mapper%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E4%B8%8D%E5%90%8C%E7%9A%84-XML-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%EF%BC%8Cid-%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%A4%8D%EF%BC%9F"><span class="toc-number">1.8.</span> <span class="toc-text">Mybatis çš„ XML Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„ XML æ˜ å°„æ–‡ä»¶ï¼Œid æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E7%9A%84-%E4%B8%BB-%E9%94%AE%E5%80%BC"><span class="toc-number">1.9.</span> <span class="toc-text">å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%89%A7%E8%A1%8C%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%EF%BC%8C%E8%83%BD%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E9%94%AE%E5%88%97%E8%A1%A8%E5%90%97%EF%BC%9F"><span class="toc-number">1.10.</span> <span class="toc-text">Mybatis æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-Mapper-%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-number">1.11.</span> <span class="toc-text">åœ¨ Mapper ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%98%A0%E5%B0%84-Enum-%E6%9E%9A%E4%B8%BE%E7%B1%BB%EF%BC%9F"><span class="toc-number">1.12.</span> <span class="toc-text">Mybatis æ˜¯å¦å¯ä»¥æ˜ å°„ Enum æšä¸¾ç±»ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B-Executor-%E6%89%A7%E8%A1%8C%E5%99%A8%EF%BC%9F%E5%AE%83%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.13.</span> <span class="toc-text">Mybatis éƒ½æœ‰å“ªäº› Executor æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">1.14.</span> <span class="toc-text">MyBatis å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-MyBatis-%E7%9A%84%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%E5%92%8C%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9F"><span class="toc-number">1.15.</span> <span class="toc-text">ä»‹ç» MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%EF%BC%9F%E5%A6%82%E6%9E%9C%E6%94%AF%E6%8C%81%EF%BC%8C%E5%AE%83%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.16.</span> <span class="toc-text">Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E8%83%BD%E5%90%A6%E6%89%A7%E8%A1%8C%E4%B8%80%E5%AF%B9%E4%B8%80%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E5%90%97%EF%BC%9F%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%AE%83%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E3%80%82"><span class="toc-number">1.17.</span> <span class="toc-text">Mybatis èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0-Mybatis-%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%9F%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6%EF%BC%9F"><span class="toc-number">1.18.</span> <span class="toc-text">ç®€è¿° Mybatis çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%88%86%E9%A1%B5%E7%9A%84%EF%BC%9F%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.19.</span> <span class="toc-text">Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E4%B8%8E-Hibernate-%E6%9C%89%E5%93%AA%E4%BA%9B%E4%B8%8D%E5%90%8C%EF%BC%9F"><span class="toc-number">1.20.</span> <span class="toc-text">MyBatis ä¸ Hibernate æœ‰å“ªäº›ä¸åŒï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC-%E7%BC%96%E7%A8%8B%E6%9C%89%E5%93%AA%E4%BA%9B%E4%B8%8D%E8%B6%B3%E4%B9%8B%E5%A4%84%EF%BC%8CMyBatis%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%9F"><span class="toc-number">1.21.</span> <span class="toc-text">JDBC ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%AF%94-IBatis-%E6%AF%94%E8%BE%83%E5%A4%A7%E7%9A%84%E5%87%A0%E4%B8%AA%E6%94%B9%E8%BF%9B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.22.</span> <span class="toc-text">Mybatis æ¯” IBatis æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C-A-%E6%A0%87%E7%AD%BE%E9%80%9A%E8%BF%87-include-%E5%BC%95%E7%94%A8%E4%BA%86B%E6%A0%87%E7%AD%BE%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E8%AF%B7%E9%97%AE%EF%BC%8CB-%E6%A0%87%E7%AD%BE%E8%83%BD%E5%90%A6%E5%AE%9A%E4%B9%89%E5%9C%A8-A-%E6%A0%87%E7%AD%BE%E7%9A%84%E5%90%8E%E9%9D%A2%EF%BC%8C%E8%BF%98%E6%98%AF%E8%AF%B4%E5%BF%85%E9%A1%BB%E5%AE%9A%E4%B9%89%E5%9C%A8A%E6%A0%87%E7%AD%BE%E7%9A%84%E5%89%8D%E9%9D%A2%EF%BC%9F"><span class="toc-number">1.23.</span> <span class="toc-text">Mybatis æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ A æ ‡ç­¾é€šè¿‡ include å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨ A æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0-Mybatis-%E7%9A%84-XML-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E5%92%8C-Mybatis-%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E9%97%B4%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-number">1.24.</span> <span class="toc-text">ç®€è¿° Mybatis çš„ XML æ˜ å°„æ–‡ä»¶å’Œ Mybatis å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#666-%E5%BD%A9%E8%9B%8B"><span class="toc-number">1.25.</span> <span class="toc-text">666. å½©è›‹</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(http://cdn.tuwenbin.vip/1557628307196cddab5c76e5e5229b884f2e10f3.jpg%401320w_744h.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">æ¶‚æ–‡æ–Œ</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç±¤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">MyBatis é¢è¯•é¢˜</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2016-10-12T10:38:45.000Z" title="Created 2016-10-12 18:38:45">2016-10-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-09-28T02:23:03.141Z" title="Updated 2020-09-28 10:23:03">2020-09-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MyBatis/">MyBatis</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MyBatis/%E9%9D%A2%E8%AF%95/">é¢è¯•</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="ç²¾å°½-MyBatis-é¢è¯•é¢˜"><a href="#ç²¾å°½-MyBatis-é¢è¯•é¢˜" class="headerlink" title="ç²¾å°½ MyBatis é¢è¯•é¢˜"></a>ç²¾å°½ MyBatis é¢è¯•é¢˜</h1><p>ä»¥ä¸‹é¢è¯•é¢˜ï¼ŒåŸºäºç½‘ç»œæ•´ç†ï¼Œå’Œè‡ªå·±ç¼–è¾‘ã€‚å…·ä½“å‚è€ƒçš„æ–‡ç« ï¼Œä¼šåœ¨æ–‡æœ«ç»™å‡ºæ‰€æœ‰çš„é“¾æ¥ã€‚</p>
<p>å¦‚æœèƒ–å‹æœ‰è‡ªå·±çš„ç–‘é—®ï¼Œæ¬¢è¿åœ¨æ˜Ÿçƒæé—®ï¼Œæˆ‘ä»¬ä¸€èµ·æ•´ç†åŠåŠçš„ MyBatis é¢è¯•é¢˜çš„å¤§ä¿å¥ã€‚</p>
<p>è€Œé¢˜ç›®çš„éš¾åº¦ï¼Œè‰¿è‰¿å°½é‡æŒ‰ç…§ä»å®¹æ˜“åˆ°å›°éš¾çš„é¡ºåºï¼Œé€æ­¥ä¸‹å»ã€‚</p>
<h2 id="MyBatis-ç¼–ç¨‹æ­¥éª¤"><a href="#MyBatis-ç¼–ç¨‹æ­¥éª¤" class="headerlink" title="MyBatis ç¼–ç¨‹æ­¥éª¤"></a>MyBatis ç¼–ç¨‹æ­¥éª¤</h2><ol>
<li>åˆ›å»º SqlSessionFactory å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ SqlSessionFactory è·å– SqlSession å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ SqlSession è·å¾— Mapper ä»£ç†å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ Mapper ä»£ç†å¯¹è±¡ï¼Œæ‰§è¡Œæ•°æ®åº“æ“ä½œã€‚</li>
<li>æ‰§è¡ŒæˆåŠŸï¼Œåˆ™ä½¿ç”¨ SqlSession æäº¤äº‹åŠ¡ã€‚</li>
<li>æ‰§è¡Œå¤±è´¥ï¼Œåˆ™ä½¿ç”¨ SqlSession å›æ»šäº‹åŠ¡ã€‚</li>
<li>æœ€ç»ˆï¼Œå…³é—­ä¼šè¯ã€‚</li>
</ol>
<h2 id="å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="#{} å’Œ ${} çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a><code>#&#123;&#125;</code> å’Œ <code>$&#123;&#125;</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>$&#123;&#125;</code> æ˜¯ Properties æ–‡ä»¶ä¸­çš„å˜é‡å ä½ç¬¦ï¼Œå®ƒå¯ä»¥ç”¨äº XML æ ‡ç­¾å±æ€§å€¼å’Œ SQL å†…éƒ¨ï¼Œå±äº<strong>å­—ç¬¦ä¸²æ›¿æ¢</strong>ã€‚ä¾‹å¦‚å°† <code>$&#123;driver&#125;</code> ä¼šè¢«é™æ€æ›¿æ¢ä¸º <code>com.mysql.jdbc.Driver</code> ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;dataSource type&#x3D;&quot;UNPOOLED&quot;&gt;<br>    &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;<br>    &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;<br>    &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;<br>&lt;&#x2F;dataSource&gt;<br></code></pre></td></tr></table></figure>

<p><code>$&#123;&#125;</code> ä¹Ÿå¯ä»¥å¯¹ä¼ é€’è¿›æ¥çš„å‚æ•°<strong>åŸæ ·æ‹¼æ¥</strong>åœ¨ SQL ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getSubject3&quot; parameterType&#x3D;&quot;Integer&quot; resultType&#x3D;&quot;Subject&quot;&gt;<br>    SELECT * FROM subject<br>    WHERE id &#x3D; $&#123;id&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®é™…åœºæ™¯ä¸‹ï¼Œä¸æ¨èè¿™ä¹ˆåšã€‚å› ä¸ºï¼Œå¯èƒ½æœ‰ SQL æ³¨å…¥çš„é£é™©ã€‚</li>
</ul>
<hr>
<p><code>#&#123;&#125;</code> æ˜¯ SQL çš„å‚æ•°å ä½ç¬¦ï¼ŒMybatis ä¼šå°† SQL ä¸­çš„ <code>#&#123;&#125;</code> æ›¿æ¢ä¸º <code>?</code> å·ï¼Œåœ¨ SQL æ‰§è¡Œå‰ä¼šä½¿ç”¨ PreparedStatement çš„å‚æ•°è®¾ç½®æ–¹æ³•ï¼ŒæŒ‰åºç»™ SQL çš„ <code>?</code> å·å ä½ç¬¦è®¾ç½®å‚æ•°å€¼ï¼Œæ¯”å¦‚ <code>ps.setInt(0, parameterValue)</code> ã€‚ æ‰€ä»¥ï¼Œ<code>#&#123;&#125;</code> æ˜¯<strong>é¢„ç¼–è¯‘å¤„ç†</strong>ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<hr>
<p>å¦å¤–ï¼Œ<code>#&#123;&#125;</code> å’Œ <code>$&#123;&#125;</code> çš„å–å€¼æ–¹å¼éå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼š<code>#&#123;item.name&#125;</code> çš„å–å€¼æ–¹å¼ï¼Œä¸ºä½¿ç”¨åå°„ä»å‚æ•°å¯¹è±¡ä¸­ï¼Œè·å– <code>item</code> å¯¹è±¡çš„ <code>name</code> å±æ€§å€¼ï¼Œç›¸å½“äº <code>param.getItem().getName()</code> ã€‚</p>
<h2 id="å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠï¼Ÿ</h2><p>ç¬¬ä¸€ç§ï¼Œ é€šè¿‡åœ¨æŸ¥è¯¢çš„ SQL è¯­å¥ä¸­å®šä¹‰å­—æ®µåçš„åˆ«åï¼Œè®©å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;selectOrder&quot; parameterType&#x3D;&quot;Integer&quot; resultType&#x3D;&quot;Order&quot;&gt; <br>    SELECT order_id AS id, order_no AS orderno, order_price AS price <br>    FROM orders <br>    WHERE order_id &#x3D; #&#123;id&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>è¿™é‡Œï¼Œè‰¿è‰¿è¿˜æœ‰å‡ ç‚¹å»ºè®®ï¼š<ul>
<li>1ã€æ•°æ®åº“çš„å…³é”®å­—ï¼Œç»Ÿä¸€ä½¿ç”¨å¤§å†™ï¼Œä¾‹å¦‚ï¼š<code>SELECT</code>ã€<code>AS</code>ã€<code>FROM</code>ã€<code>WHERE</code> ã€‚</li>
<li>2ã€æ¯ 5 ä¸ªæŸ¥è¯¢å­—æ®µæ¢ä¸€è¡Œï¼Œä¿æŒæ•´é½ã€‚</li>
<li>3ã€<code>,</code> çš„åé¢ï¼Œå’Œ <code>=</code> çš„å‰åï¼Œéœ€è¦æœ‰ç©ºæ ¼ï¼Œæ›´åŠ æ¸…æ™°ã€‚</li>
<li>4ã€<code>SELECT</code>ã€<code>FROM</code>ã€<code>WHERE</code> ç­‰ï¼Œå•ç‹¬ä¸€è¡Œï¼Œé«˜ç«¯å¤§æ°”ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>ç¬¬äºŒç§ï¼Œæ˜¯ç¬¬ä¸€ç§çš„ç‰¹æ®Šæƒ…å†µã€‚å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åå·®ï¼Œä¸»è¦æ˜¯å‰è€…ä¸º<strong>ä¸‹åˆ’çº¿é£æ ¼</strong>ï¼Œåè€…ä¸º<strong>é©¼å³°é£æ ¼</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥é…ç½®å¦‚ä¸‹ï¼Œå®ç°è‡ªåŠ¨çš„ä¸‹åˆ’çº¿è½¬é©¼å³°çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;setting name&#x3D;&quot;logImpl&quot; value&#x3D;&quot;LOG4J&quot;&#x2F;&gt;<br>    &lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;<br>&lt;&#x2F;settings&gt;<br></code></pre></td></tr></table></figure>

<p>ğŸ˜ˆ ä¹Ÿå°±è¯´ï¼Œçº¦å®šå¤§äºé…ç½®ã€‚éå¸¸æ¨èï¼</p>
<hr>
<p>ç¬¬ä¸‰ç§ï¼Œé€šè¿‡ <code>&lt;resultMap&gt;</code> æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;resultMap type&#x3D;&quot;me.gacl.domain.Order&quot; id&#x3D;â€OrderResultMapâ€&gt; <br>    &lt;!â€“- ç”¨ id å±æ€§æ¥æ˜ å°„ä¸»é”®å­—æ®µ -â€“&gt; <br>    &lt;id property&#x3D;&quot;id&quot; column&#x3D;&quot;order_id&quot;&gt; <br>    &lt;!â€“- ç”¨ result å±æ€§æ¥æ˜ å°„éä¸»é”®å­—æ®µï¼Œproperty ä¸ºå®ä½“ç±»å±æ€§åï¼Œcolumn ä¸ºæ•°æ®è¡¨ä¸­çš„å±æ€§ -â€“&gt; <br>    &lt;result property&#x3D;&quot;orderNo&quot; column &#x3D;&quot;order_no&quot; &#x2F;&gt; <br>    &lt;result property&#x3D;&quot;price&quot; column&#x3D;&quot;order_price&quot; &#x2F;&gt; <br>&lt;&#x2F;resultMap&gt;<br><br>&lt;select id&#x3D;&quot;getOrder&quot; parameterType&#x3D;&quot;Integer&quot; resultMap&#x3D;&quot;OrderResultMap&quot;&gt;<br>    SELECT * <br>    FROM orders <br>    WHERE order_id &#x3D; #&#123;id&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>æ­¤å¤„ <code>SELECT *</code> ä»…ä»…ä½œä¸ºç¤ºä¾‹åªç”¨ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œåƒä¸‡åƒä¸‡åƒä¸‡ä¸è¦è¿™ä¹ˆå¹²ã€‚ç”¨å¤šå°‘å­—æ®µï¼ŒæŸ¥è¯¢å¤šå°‘å­—æ®µã€‚</li>
<li>ç›¸æ¯”ç¬¬ä¸€ç§ï¼Œç¬¬ä¸‰ç§çš„<strong>é‡ç”¨æ€§</strong>ä¼šä¸€äº›ã€‚</li>
</ul>
<h2 id="XML-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-update-deleteæ ‡-ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"><a href="#XML-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-update-deleteæ ‡-ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ" class="headerlink" title="XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select | insert | update | deleteæ ‡ ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"></a>XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select | insert | update | deleteæ ‡ ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ</h2><p>å¦‚ä¸‹éƒ¨åˆ†ï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/sqlmap-xml.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” Mapper XML æ–‡ä»¶ã€‹</a> ï¼š</p>
<ul>
<li><p><code>&lt;cache /&gt;</code> æ ‡ç­¾ï¼Œç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</p>
<ul>
<li><code>&lt;cache-ref /&gt;</code> æ ‡ç­¾ï¼Œå…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚</li>
</ul>
</li>
<li><p><code>&lt;resultMap /&gt;</code> æ ‡ç­¾ï¼Œæ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚</p>
</li>
<li><p><del>`` æ ‡ç­¾ï¼Œå·²åºŸå¼ƒï¼è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚å†…è”å‚æ•°æ˜¯é¦–é€‰,è¿™ä¸ªå…ƒç´ å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ï¼Œè¿™é‡Œä¸ä¼šè®°å½•ã€‚</del></p>
</li>
<li><p><code>&lt;sql /&gt;</code>æ ‡ç­¾ï¼Œå¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚</p>
<ul>
<li><code>&lt;include /&gt;</code> æ ‡ç­¾ï¼Œå¼•ç”¨ <code>&lt;sql /&gt;</code> æ ‡ç­¾çš„è¯­å¥ã€‚</li>
</ul>
</li>
<li><p><code>&lt;selectKey /&gt;</code> æ ‡ç­¾ï¼Œä¸æ”¯æŒè‡ªå¢çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æ ‡ç­¾ã€‚</p>
</li>
</ul>
<p>å¦‚ä¸‹éƒ¨åˆ†ï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” åŠ¨æ€ SQLã€‹</a> ï¼š</p>
<ul>
<li><code>&lt;if /&gt;</code></li>
<li><code>&lt;choose /&gt;</code>ã€<code>&lt;when /&gt;</code>ã€<code>&lt;otherwise /&gt;</code></li>
<li><code>&lt;trim /&gt;</code>ã€<code>&lt;where /&gt;</code>ã€<code>&lt;set /&gt;</code></li>
<li><code>&lt;foreach /&gt;</code></li>
<li><code>&lt;bind /&gt;</code></li>
</ul>
<h2 id="Mybatis-åŠ¨æ€-SQL-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€-SQL-ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€-SQL-çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ"><a href="#Mybatis-åŠ¨æ€-SQL-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€-SQL-ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€-SQL-çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ" class="headerlink" title="Mybatis åŠ¨æ€ SQL æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€ SQL ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€ SQL çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ"></a>Mybatis åŠ¨æ€ SQL æ˜¯åšä»€ä¹ˆçš„ï¼Ÿéƒ½æœ‰å“ªäº›åŠ¨æ€ SQL ï¼Ÿèƒ½ç®€è¿°ä¸€ä¸‹åŠ¨æ€ SQL çš„æ‰§è¡ŒåŸç†å—ï¼Ÿ</h2><ul>
<li>Mybatis åŠ¨æ€ SQL ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ XML æ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥ XML æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€ SQL ï¼Œå®Œæˆé€»è¾‘åˆ¤æ–­å’ŒåŠ¨æ€æ‹¼æ¥ SQL çš„åŠŸèƒ½ã€‚</li>
<li>Mybatis æä¾›äº† 9 ç§åŠ¨æ€ SQL æ ‡ç­¾ï¼š<code>&lt;if /&gt;</code>ã€<code>&lt;choose /&gt;</code>ã€<code>&lt;when /&gt;</code>ã€<code>&lt;otherwise /&gt;</code>ã€<code>&lt;trim /&gt;</code>ã€<code>&lt;where /&gt;</code>ã€<code>&lt;set /&gt;</code>ã€<code>&lt;foreach /&gt;</code>ã€<code>&lt;bind /&gt;</code> ã€‚</li>
<li>å…¶æ‰§è¡ŒåŸç†ä¸ºï¼Œä½¿ç”¨ <strong>OGNL</strong> çš„è¡¨è¾¾å¼ï¼Œä» SQL å‚æ•°å¯¹è±¡ä¸­è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼Œæ ¹æ®è¡¨è¾¾å¼çš„å€¼åŠ¨æ€æ‹¼æ¥ SQL ï¼Œä»¥æ­¤æ¥å®ŒæˆåŠ¨æ€ SQL çš„åŠŸèƒ½ã€‚</li>
</ul>
<p>å¦‚ä¸Šçš„å†…å®¹ï¼Œæ›´åŠ è¯¦ç»†çš„è¯ï¼Œè¯·çœ‹ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html">ã€ŠMyBatis æ–‡æ¡£ â€”â€” åŠ¨æ€ SQLã€‹</a> æ–‡æ¡£ã€‚</p>
<h2 id="æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª-XML-æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª-Mapper-æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª-Mapper-æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper-æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ"><a href="#æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª-XML-æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª-Mapper-æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª-Mapper-æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper-æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ" class="headerlink" title="æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Mapper æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ"></a>æœ€ä½³å®è·µä¸­ï¼Œé€šå¸¸ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ª Mapper æ¥å£ä¸ä¹‹å¯¹åº”ã€‚è¯·é—®ï¼Œè¿™ä¸ª Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸMapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ</h2><p>Mapper æ¥å£ï¼Œå¯¹åº”çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ <code>&quot;namespace&quot;</code> çš„å€¼ã€‚</li>
<li>æ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­ MappedStatement çš„ <code>&quot;id&quot;</code> å€¼ã€‚</li>
<li>æ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚</li>
</ul>
<p>Mapper æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å + æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ªå¯¹åº”çš„ MappedStatement ã€‚ä¸¾ä¾‹ï¼š<code>com.mybatis3.mappers.StudentDao.findStudentById</code> ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° <code>&quot;namespace&quot;</code> ä¸º <code>com.mybatis3.mappers.StudentDao</code> ä¸‹é¢ <code>&quot;id&quot;</code> ä¸º <code>findStudentById</code> çš„ MappedStatement ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼Œåœ¨ Mybatis ä¸­ï¼Œæ¯ä¸€ä¸ª <code>&lt;select /&gt;</code>ã€<code>&lt;insert /&gt;</code>ã€<code>&lt;update /&gt;</code>ã€<code>&lt;delete /&gt;</code> æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª MappedStatement å¯¹è±¡ã€‚</p>
<p>å¦å¤–ï¼ŒMapper æ¥å£çš„å®ç°ç±»ï¼Œé€šè¿‡ MyBatis ä½¿ç”¨ <strong>JDK Proxy</strong> è‡ªåŠ¨ç”Ÿæˆå…¶ä»£ç†å¯¹è±¡ Proxy ï¼Œè€Œä»£ç†å¯¹è±¡ Proxy ä¼šæ‹¦æˆªæ¥å£æ–¹æ³•ï¼Œä»è€Œâ€œè°ƒç”¨â€å¯¹åº”çš„ MappedStatement æ–¹æ³•ï¼Œæœ€ç»ˆæ‰§è¡Œ SQL ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹å›¾ï¼š<a target="_blank" rel="noopener" href="http://static2.iocoder.cn/images/MyBatis/2020_03_15/02.png"><img src="http://cdn.tuwenbin.vip/02.png" alt="æµç¨‹"></a>æµç¨‹</p>
<ul>
<li><p>å…¶ä¸­ï¼ŒSqlSession åœ¨è°ƒç”¨ Executor ä¹‹å‰ï¼Œä¼šè·å¾—å¯¹åº”çš„ MappedStatement æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š<code>DefaultSqlSession#select(String statement, Object parameter, RowBounds rowBounds, ResultHandler handler)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; DefaultSqlSession.java<br><br>@Override<br>public void select(String statement, Object parameter, RowBounds rowBounds, ResultHandler handler) &#123;<br>    try &#123;<br>        &#x2F;&#x2F; è·å¾— MappedStatement å¯¹è±¡<br>        MappedStatement ms &#x3D; configuration.getMappedStatement(statement);<br>        &#x2F;&#x2F; æ‰§è¡ŒæŸ¥è¯¢<br>        executor.query(ms, wrapCollection(parameter), rowBounds, handler);<br>    &#125; catch (Exception e) &#123;<br>        throw ExceptionFactory.wrapException(&quot;Error querying database.  Cause: &quot; + e, e);<br>    &#125; finally &#123;<br>        ErrorContext.instance().reset();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®Œæ•´çš„æµç¨‹ï¼Œèƒ–å‹å¯ä»¥æ…¢æ…¢æ’¸ä¸‹ MyBatis çš„æºç ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>Mapper æ¥å£é‡Œçš„æ–¹æ³•ï¼Œæ˜¯ä¸èƒ½é‡è½½çš„ï¼Œå› ä¸ºæ˜¯<strong>å…¨é™å + æ–¹æ³•å</strong>çš„ä¿å­˜å’Œå¯»æ‰¾ç­–ç•¥ã€‚ğŸ˜ˆ æ‰€ä»¥æœ‰æ—¶ï¼Œæƒ³ä¸ª Mapper æ¥å£é‡Œçš„æ–¹æ³•åï¼Œè¿˜æ˜¯è›®é—¹å¿ƒçš„ï¼Œå˜¿å˜¿ã€‚</p>
<h2 id="Mapper-æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼-åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„"><a href="#Mapper-æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼-åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„" class="headerlink" title="Mapper æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼,åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„?"></a>Mapper æ¥å£ç»‘å®šæœ‰å‡ ç§å®ç°æ–¹å¼,åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„?</h2><p>æ¥å£ç»‘å®šæœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼Œé€šè¿‡ <strong>XML Mapper</strong> é‡Œé¢å†™ SQL æ¥ç»‘å®šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦æŒ‡å®š XML æ˜ å°„æ–‡ä»¶é‡Œé¢çš„ <code>&quot;namespace&quot;</code> å¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚</p>
<p>ç¬¬äºŒç§ï¼Œé€šè¿‡<strong>æ³¨è§£</strong>ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š <code>@Select</code>ã€<code>@Update</code>ã€<code>@Insert</code>ã€<code>@Delete</code> æ³¨è§£ï¼Œé‡Œé¢åŒ…å« SQL è¯­å¥æ¥ç»‘å®šã€‚</p>
<p>ç¬¬ä¸‰ç§ï¼Œæ˜¯ç¬¬äºŒç§çš„ç‰¹ä¾‹ï¼Œä¹Ÿæ˜¯é€šè¿‡<strong>æ³¨è§£</strong>ç»‘å®šï¼Œåœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š <code>@SelectProvider</code>ã€<code>@UpdateProvider</code>ã€<code>@InsertProvider</code>ã€<code>@DeleteProvider</code> æ³¨è§£ï¼Œé€šè¿‡ Java ä»£ç ï¼Œç”Ÿæˆå¯¹åº”çš„åŠ¨æ€ SQL ã€‚</p>
<hr>
<p>å®é™…åœºæ™¯ä¸‹ï¼Œæœ€æœ€æœ€æ¨èçš„æ˜¯<strong>ç¬¬ä¸€ç§</strong>æ–¹å¼ã€‚å› ä¸ºï¼ŒSQL é€šè¿‡æ³¨è§£å†™åœ¨ Java ä»£ç ä¸­ï¼Œä¼šéå¸¸æ‚ä¹±ã€‚è€Œå†™åœ¨ XML ä¸­ï¼Œæ›´åŠ æœ‰æ•´ä½“æ€§ï¼Œå¹¶ä¸”å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨ OGNL è¡¨è¾¾å¼ã€‚</p>
<h2 id="Mybatis-çš„-XML-Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„-XML-æ˜ å°„æ–‡ä»¶ï¼Œid-æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ"><a href="#Mybatis-çš„-XML-Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„-XML-æ˜ å°„æ–‡ä»¶ï¼Œid-æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ" class="headerlink" title="Mybatis çš„ XML Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„ XML æ˜ å°„æ–‡ä»¶ï¼Œid æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ"></a>Mybatis çš„ XML Mapperæ–‡ä»¶ä¸­ï¼Œä¸åŒçš„ XML æ˜ å°„æ–‡ä»¶ï¼Œid æ˜¯å¦å¯ä»¥é‡å¤ï¼Ÿ</h2><p>ä¸åŒçš„ XML Mapper æ–‡ä»¶ï¼Œå¦‚æœé…ç½®äº† <code>&quot;namespace&quot;</code> ï¼Œé‚£ä¹ˆ id å¯ä»¥é‡å¤ï¼›å¦‚æœæ²¡æœ‰é…ç½® <code>&quot;namespace&quot;</code> ï¼Œé‚£ä¹ˆ id ä¸èƒ½é‡å¤ã€‚æ¯•ç«Ÿ<code>&quot;namespace&quot;</code> ä¸æ˜¯å¿…é¡»çš„ï¼Œåªæ˜¯æœ€ä½³å®è·µè€Œå·²ã€‚</p>
<p>åŸå› å°±æ˜¯ï¼Œ<code>namespace + id</code> æ˜¯ä½œä¸º <code>Map&lt;String, MappedStatement&gt;</code> çš„ key ä½¿ç”¨çš„ã€‚å¦‚æœæ²¡æœ‰ <code>&quot;namespace&quot;</code>ï¼Œå°±å‰©ä¸‹ id ï¼Œé‚£ä¹ˆ id é‡å¤ä¼šå¯¼è‡´æ•°æ®äº’ç›¸è¦†ç›–ã€‚å¦‚æœæœ‰äº† <code>&quot;namespace&quot;</code>ï¼Œè‡ªç„¶ id å°±å¯ä»¥é‡å¤ï¼Œ<code>&quot;namespace&quot;</code>ä¸åŒï¼Œ<code>namespace + id</code> è‡ªç„¶ä¹Ÿå°±ä¸åŒã€‚</p>
<h2 id="å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„-ä¸»-é”®å€¼"><a href="#å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„-ä¸»-é”®å€¼" class="headerlink" title="å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼?"></a>å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼?</h2><p>ä¸åŒçš„æ•°æ®åº“ï¼Œè·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼çš„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚</p>
<p>MySQL æœ‰ä¸¤ç§æ–¹å¼ï¼Œä½†æ˜¯<strong>è‡ªå¢ä¸»é”®</strong>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; æ–¹å¼ä¸€ï¼Œä½¿ç”¨ useGeneratedKeys + keyProperty å±æ€§<br>&lt;insert id&#x3D;&quot;insert&quot; parameterType&#x3D;&quot;Person&quot; useGeneratedKeys&#x3D;&quot;true&quot; keyProperty&#x3D;&quot;id&quot;&gt;<br>    INSERT INTO person(name, pswd)<br>    VALUE (#&#123;name&#125;, #&#123;pswd&#125;)<br>&lt;&#x2F;insert&gt;<br>    <br>&#x2F;&#x2F; æ–¹å¼äºŒï¼Œä½¿ç”¨ &#96;&lt;selectKey &#x2F;&gt;&#96; æ ‡ç­¾<br>&lt;insert id&#x3D;&quot;insert&quot; parameterType&#x3D;&quot;Person&quot;&gt;<br>    &lt;selectKey keyProperty&#x3D;&quot;id&quot; resultType&#x3D;&quot;long&quot; order&#x3D;&quot;AFTER&quot;&gt;<br>        SELECT LAST_INSERT_ID()<br>    &lt;&#x2F;selectKey&gt;<br>        <br>    INSERT INTO person(name, pswd)<br>    VALUE (#&#123;name&#125;, #&#123;pswd&#125;)<br>&lt;&#x2F;insert&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ï¼Œ<strong>æ–¹å¼ä¸€</strong>è¾ƒä¸ºå¸¸ç”¨ã€‚</li>
</ul>
<hr>
<p>Oracle æœ‰ä¸¤ç§æ–¹å¼ï¼Œ<strong>åºåˆ—</strong>å’Œ<strong>è§¦å‘å™¨</strong>ã€‚å› ä¸ºè‰¿è‰¿è‡ªå·±ä¸äº†è§£ Oracle ï¼Œæ‰€ä»¥é—®äº†é“¶è¡Œçš„æœ‹å‹ï¼Œä»–ä»¬æ˜¯ä½¿ç”¨<strong>åºåˆ—</strong>ã€‚è€ŒåŸºäº<strong>åºåˆ—</strong>ï¼Œæ ¹æ® <code>&lt;selectKey /&gt;</code> æ‰§è¡Œçš„æ—¶æœºï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; è¿™ä¸ªæ˜¯åˆ›å»ºè¡¨çš„è‡ªå¢åºåˆ—<br>CREATE SEQUENCE student_sequence<br>INCREMENT BY 1<br>NOMAXVALUE<br>NOCYCLE<br>CACHE 10;<br><br>&#x2F;&#x2F; æ–¹å¼ä¸€ï¼Œä½¿ç”¨ &#96;&lt;selectKey &#x2F;&gt;&#96; æ ‡ç­¾ + BEFORE<br>&lt;insert id&#x3D;&quot;add&quot; parameterType&#x3D;&quot;Student&quot;&gt;<br>ã€€ã€€&lt;selectKey keyProperty&#x3D;&quot;student_id&quot; resultType&#x3D;&quot;int&quot; order&#x3D;&quot;BEFORE&quot;&gt;<br>      select student_sequence.nextval FROM dual<br>    &lt;&#x2F;selectKey&gt;<br>    <br>     INSERT INTO student(student_id, student_name, student_age)<br>     VALUES (#&#123;student_id&#125;,#&#123;student_name&#125;,#&#123;student_age&#125;)<br>&lt;&#x2F;insert&gt;<br><br>&#x2F;&#x2F; æ–¹å¼äºŒï¼Œä½¿ç”¨ &#96;&lt;selectKey &#x2F;&gt;&#96; æ ‡ç­¾ + AFTER<br>&lt;insert id&#x3D;&quot;save&quot; parameterType&#x3D;&quot;com.threeti.to.ZoneTO&quot; &gt;<br>    &lt;selectKey resultType&#x3D;&quot;java.lang.Long&quot; keyProperty&#x3D;&quot;id&quot; order&#x3D;&quot;AFTER&quot; &gt;<br>      SELECT SEQ_ZONE.CURRVAL AS id FROM dual<br>    &lt;&#x2F;selectKey&gt;<br>    <br>    INSERT INTO TBL_ZONE (ID, NAME ) <br>    VALUES (SEQ_ZONE.NEXTVAL, #&#123;name,jdbcType&#x3D;VARCHAR&#125;)<br>&lt;&#x2F;insert&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>ä»–ä»¬ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ²¡æœ‰å…·ä½“åŸå› ï¼Œå¯èƒ½å°±æ²¡ä»€ä¹ˆè®²ç©¶å§ã€‚å˜¿å˜¿ã€‚</li>
</ul>
<p>è‡³äºä¸ºä»€ä¹ˆä¸ç”¨<strong>è§¦å‘å™¨</strong>å‘¢ï¼Ÿæœ‹å‹æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æœ‹å‹ï¼šè§¦å‘å™¨ä¸è¡Œå•Šï¼Œæˆ‘ä»¬è¿™è¾¹åŸæ¥ä¹Ÿæœ‰è§¦å‘å™¨ï¼Œä¸€æœ‰æ•°æ®æ›´æ”¹å°±ä¼šæœ‰é—®é¢˜äº†å‘€<br>è‰¿è‰¿ï¼šæ•°æ®æ›´æ”¹æŒ‡çš„æ˜¯ï¼Ÿ<br>æœ‹å‹ï¼šå°±æ”¹çº¿ä¸ŠæŸå‡ æ¡æ•°æ®<br>è‰¿è‰¿ï¼šå™¢å™¢ã€‚æ‰‹åŠ¨æ”¹æ˜¯å§ï¼Ÿ<br>æœ‹å‹ï¼šä¸è¡Œ~</p>
</blockquote>
<hr>
<p>å½“ç„¶ï¼Œæ•°æ®åº“è¿˜æœ‰ SQLServerã€PostgreSQLã€DB2ã€H2 ç­‰ç­‰ï¼Œå…·ä½“çš„æ–¹å¼ï¼Œèƒ–å‹è‡ªå·± Google ä¸‹å™¢ã€‚</p>
<p>å…³äºå¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„(ä¸»)é”®å€¼çš„<strong>åŸç†</strong>ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-3/">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆä¸‰ï¼‰ä¹‹ KeyGeneratorã€‹</a> ã€‚</p>
<h2 id="Mybatis-æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ"><a href="#Mybatis-æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ" class="headerlink" title="Mybatis æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ"></a>Mybatis æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œèƒ½è¿”å›æ•°æ®åº“ä¸»é”®åˆ—è¡¨å—ï¼Ÿ</h2><p>èƒ½ï¼ŒJDBC éƒ½èƒ½åšï¼ŒMybatis å½“ç„¶ä¹Ÿèƒ½åšã€‚</p>
<h2 id="åœ¨-Mapper-ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°"><a href="#åœ¨-Mapper-ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°" class="headerlink" title="åœ¨ Mapper ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?"></a>åœ¨ Mapper ä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?</h2><p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨ Map é›†åˆï¼Œè£…è½½å¤šä¸ªå‚æ•°è¿›è¡Œä¼ é€’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; è°ƒç”¨æ–¹æ³•<br>Map&lt;String, Object&gt; map &#x3D; new HashMap();<br>map.put(&quot;start&quot;, start);<br>map.put(&quot;end&quot;, end);<br>return studentMapper.selectStudents(map);<br><br>&#x2F;&#x2F; Mapper æ¥å£<br>List&lt;Student&gt; selectStudents(Map&lt;String, Object&gt; map);<br><br>&#x2F;&#x2F; Mapper XML ä»£ç <br>&lt;select id&#x3D;&quot;selectStudents&quot; parameterType&#x3D;&quot;Map&quot; resultType&#x3D;&quot;Student&quot;&gt;<br>    SELECT * <br>    FROM students <br>    LIMIT #&#123;start&#125;, #&#123;end&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>æ˜¾ç„¶ï¼Œè¿™ä¸æ˜¯ä¸€ç§ä¼˜é›…çš„æ–¹å¼ã€‚</li>
</ul>
<hr>
<p>ç¬¬äºŒç§ï¼Œä¿æŒä¼ é€’å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨ <code>@Param</code> æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; è°ƒç”¨æ–¹æ³•<br>return studentMapper.selectStudents(0, 10);<br><br>&#x2F;&#x2F; Mapper æ¥å£<br>List&lt;Student&gt; selectStudents(@Param(&quot;start&quot;) Integer start, @Param(&quot;end&quot;) Integer end);<br><br>&#x2F;&#x2F; Mapper XML ä»£ç <br>&lt;select id&#x3D;&quot;selectStudents&quot; resultType&#x3D;&quot;Student&quot;&gt;<br>    SELECT * <br>    FROM students <br>    LIMIT #&#123;start&#125;, #&#123;end&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</li>
</ul>
<hr>
<p>ç¬¬ä¸‰ç§ï¼Œä¿æŒä¼ é€’å¤šä¸ªå‚æ•°ï¼Œä¸ä½¿ç”¨ <code>@Param</code> æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; è°ƒç”¨æ–¹æ³•<br>return studentMapper.selectStudents(0, 10);<br><br>&#x2F;&#x2F; Mapper æ¥å£<br>List&lt;Student&gt; selectStudents(Integer start, Integer end);<br><br>&#x2F;&#x2F; Mapper XML ä»£ç <br>&lt;select id&#x3D;&quot;selectStudents&quot; resultType&#x3D;&quot;Student&quot;&gt;<br>    SELECT * <br>    FROM students <br>    LIMIT #&#123;param1&#125;, #&#123;param2&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ï¼ŒæŒ‰ç…§å‚æ•°åœ¨æ–¹æ³•æ–¹æ³•ä¸­çš„ä½ç½®ï¼Œä» 1 å¼€å§‹ï¼Œé€ä¸ªä¸º <code>#&#123;param1&#125;</code>ã€<code>#&#123;param2&#125;</code>ã€<code>#&#123;param3&#125;</code> ä¸æ–­å‘ä¸‹ã€‚</li>
</ul>
<h2 id="Mybatis-æ˜¯å¦å¯ä»¥æ˜ å°„-Enum-æšä¸¾ç±»ï¼Ÿ"><a href="#Mybatis-æ˜¯å¦å¯ä»¥æ˜ å°„-Enum-æšä¸¾ç±»ï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦å¯ä»¥æ˜ å°„ Enum æšä¸¾ç±»ï¼Ÿ"></a>Mybatis æ˜¯å¦å¯ä»¥æ˜ å°„ Enum æšä¸¾ç±»ï¼Ÿ</h2><p>Mybatis å¯ä»¥æ˜ å°„æšä¸¾ç±»ï¼Œå¯¹åº”çš„å®ç°ç±»ä¸º EnumTypeHandler æˆ– EnumOrdinalTypeHandler ã€‚</p>
<ul>
<li>EnumTypeHandler ï¼ŒåŸºäº <code>Enum.name</code> å±æ€§( String )ã€‚<strong>é»˜è®¤</strong>ã€‚</li>
<li>EnumOrdinalTypeHandler ï¼ŒåŸºäº <code>Enum.ordinal</code> å±æ€§( <code>int</code> )ã€‚å¯é€šè¿‡ <code>&lt;setting name=&quot;defaultEnumTypeHandler&quot; value=&quot;EnumOrdinalTypeHandler&quot; /&gt;</code> æ¥è®¾ç½®ã€‚</li>
</ul>
<p>ğŸ˜ˆ å½“ç„¶ï¼Œå®é™…å¼€å‘åœºæ™¯ï¼Œæˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ Enum ç±»å‹ï¼Œæ›´åŠ çš„æ–¹å¼æ˜¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plain">public class Dog &#123;<br><br>    public static final int STATUS_GOOD &#x3D; 1;<br>    public static final int STATUS_BETTER &#x3D; 2;<br>    public static final int STATUS_BEST &#x3D; 3ï¼›<br>    <br>    private int status;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<p>å¹¶ä¸”ï¼Œä¸å•å¯ä»¥æ˜ å°„æšä¸¾ç±»ï¼ŒMybatis å¯ä»¥æ˜ å°„ä»»ä½•å¯¹è±¡åˆ°è¡¨çš„ä¸€åˆ—ä¸Šã€‚æ˜ å°„æ–¹å¼ä¸ºè‡ªå®šä¹‰ä¸€ä¸ª TypeHandler ç±»ï¼Œå®ç° TypeHandler çš„<code>#setParameter(...)</code> å’Œ <code>#getResult(...)</code> æ¥å£æ–¹æ³•ã€‚</p>
<p>TypeHandler æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>ä¸€æ˜¯ï¼Œå®Œæˆä» javaType è‡³ jdbcType çš„è½¬æ¢ã€‚</li>
<li>äºŒæ˜¯ï¼Œå®Œæˆ jdbcType è‡³ javaType çš„è½¬æ¢ã€‚</li>
</ul>
<p>å…·ä½“ä½“ç°ä¸º <code>#setParameter(...)</code> å’Œ <code>#getResult(..)</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ä»£è¡¨è®¾ç½® SQL é—®å·å ä½ç¬¦å‚æ•°å’Œè·å–åˆ—æŸ¥è¯¢ç»“æœã€‚</p>
<p>å…³äº TypeHandler çš„<strong>åŸç†</strong>ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/type-package/">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” ç±»å‹æ¨¡å—ã€‹</a> ã€‚</p>
<h2 id="Mybatis-éƒ½æœ‰å“ªäº›-Executor-æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-éƒ½æœ‰å“ªäº›-Executor-æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis éƒ½æœ‰å“ªäº› Executor æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis éƒ½æœ‰å“ªäº› Executor æ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Mybatis æœ‰å››ç§ Executor æ‰§è¡Œå™¨ï¼Œåˆ†åˆ«æ˜¯ SimpleExecutorã€ReuseExecutorã€BatchExecutorã€CachingExecutor ã€‚</p>
<ul>
<li>SimpleExecutor ï¼šæ¯æ‰§è¡Œä¸€æ¬¡ update æˆ– select æ“ä½œï¼Œå°±åˆ›å»ºä¸€ä¸ª Statement å¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­ Statement å¯¹è±¡ã€‚</li>
<li>ReuseExecutor ï¼šæ‰§è¡Œ update æˆ– select æ“ä½œï¼Œä»¥ SQL ä½œä¸ºkey æŸ¥æ‰¾<strong>ç¼“å­˜</strong>çš„ Statement å¯¹è±¡ï¼Œå­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼›ç”¨å®Œåï¼Œä¸å…³é—­ Statement å¯¹è±¡ï¼Œè€Œæ˜¯æ”¾ç½®äºç¼“å­˜ <code>Map&lt;String, Statement&gt;</code> å†…ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é‡å¤ä½¿ç”¨ Statement å¯¹è±¡ã€‚</li>
<li>BatchExecutor ï¼šæ‰§è¡Œ update æ“ä½œï¼ˆæ²¡æœ‰ select æ“ä½œï¼Œå› ä¸º JDBC æ‰¹å¤„ç†ä¸æ”¯æŒ select  æ“ä½œï¼‰ï¼Œå°†æ‰€æœ‰ SQL éƒ½æ·»åŠ åˆ°æ‰¹å¤„ç†ä¸­ï¼ˆé€šè¿‡ addBatch æ–¹æ³•ï¼‰ï¼Œç­‰å¾…ç»Ÿä¸€æ‰§è¡Œï¼ˆä½¿ç”¨ executeBatch æ–¹æ³•ï¼‰ã€‚å®ƒç¼“å­˜äº†å¤šä¸ª  Statement å¯¹è±¡ï¼Œæ¯ä¸ª Statement å¯¹è±¡éƒ½æ˜¯è°ƒç”¨ addBatch æ–¹æ³•å®Œæ¯•åï¼Œç­‰å¾…ä¸€æ¬¡æ‰§è¡Œ executeBatch æ‰¹å¤„ç†ã€‚<strong>å®é™…ä¸Šï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ JDBC æ‰¹å¤„ç†æ˜¯ç›¸åŒ</strong>ã€‚</li>
<li>CachingExecutor ï¼šåœ¨ä¸Šè¿°çš„ä¸‰ä¸ªæ‰§è¡Œå™¨ä¹‹ä¸Šï¼Œå¢åŠ <strong>äºŒçº§ç¼“å­˜</strong>çš„åŠŸèƒ½ã€‚</li>
</ul>
<hr>
<p>é€šè¿‡è®¾ç½® <code>&lt;setting name=&quot;defaultExecutorType&quot; value=&quot;&quot;&gt;</code> çš„ <code>&quot;value&quot;</code> å±æ€§ï¼Œå¯ä¼ å…¥ SIMPLEã€REUSEã€BATCH ä¸‰ä¸ªå€¼ï¼Œåˆ†åˆ«ä½¿ç”¨ SimpleExecutorã€ReuseExecutorã€BatchExecutor æ‰§è¡Œå™¨ã€‚</p>
<p>é€šè¿‡è®¾ç½® <code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;&quot;</code> çš„ <code>&quot;value&quot;</code> å±æ€§ä¸º <code>true</code> æ—¶ï¼Œåˆ›å»º CachingExecutor æ‰§è¡Œå™¨ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-1">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆä¸€ï¼‰ä¹‹ Executorã€‹</a> ã€‚</p>
<h2 id="MyBatis-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥"><a href="#MyBatis-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥" class="headerlink" title="MyBatis å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥?"></a>MyBatis å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥?</h2><p>é¦–å…ˆï¼Œåœ¨ Mapper XML ç¼–å†™ä¸€ä¸ªç®€å•çš„ Insert è¯­å¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;insert id&#x3D;&quot;insertUser&quot; parameterType&#x3D;&quot;String&quot;&gt; <br>    INSERT INTO users(name) <br>    VALUES (#&#123;value&#125;) <br>&lt;&#x2F;insert&gt;<br></code></pre></td></tr></table></figure>

<p>ç„¶åï¼Œç„¶ååœ¨å¯¹åº”çš„ Mapper æ¥å£ä¸­ï¼Œç¼–å†™æ˜ å°„çš„æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">public interface UserMapper &#123;<br>    <br>    void insertUser(@Param(&quot;name&quot;) String name);<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ€åï¼Œè°ƒç”¨è¯¥ Mapper æ¥å£æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs plain">private static SqlSessionFactory sqlSessionFactory;<br><br>@Test<br>public void testBatch() &#123;<br>    &#x2F;&#x2F; åˆ›å»ºè¦æ’å…¥çš„ç”¨æˆ·çš„åå­—çš„æ•°ç»„<br>    List&lt;String&gt; names &#x3D; new ArrayList&lt;&gt;();<br>    names.add(&quot;å å°ç‹¼&quot;);<br>    names.add(&quot;æœ±å°å®&quot;);<br>    names.add(&quot;å¾å¦ˆ&quot;);<br>    names.add(&quot;é£å“¥&quot;);<br><br>    &#x2F;&#x2F; è·å¾—æ‰§è¡Œå™¨ç±»å‹ä¸º Batch çš„ SqlSession å¯¹è±¡ï¼Œå¹¶ä¸” autoCommit &#x3D; false ï¼Œç¦æ­¢äº‹åŠ¡è‡ªåŠ¨æäº¤<br>    try (SqlSession session &#x3D; sqlSessionFactory.openSession(ExecutorType.BATCH, false)) &#123;<br>        &#x2F;&#x2F; è·å¾— Mapper å¯¹è±¡<br>        UserMapper mapper &#x3D; session.getMapper(UserMapper.class);<br>        &#x2F;&#x2F; å¾ªç¯æ’å…¥<br>        for (String name : names) &#123;<br>            mapper.insertUser(name);<br>        &#125;<br>        &#x2F;&#x2F; æäº¤æ‰¹é‡æ“ä½œ<br>        session.commit();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä»£ç æ¯”è¾ƒç®€å•ï¼Œèƒ–å‹ä»”ç»†çœ‹çœ‹ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">INSERT INTO [è¡¨å]([åˆ—å],[åˆ—å]) <br>VALUES<br>([åˆ—å€¼],[åˆ—å€¼])),<br>([åˆ—å€¼],[åˆ—å€¼])),<br>([åˆ—å€¼],[åˆ—å€¼]));<br></code></pre></td></tr></table></figure>

<ul>
<li>å¯¹äºè¿™ç§æ–¹å¼ï¼Œéœ€è¦ä¿è¯å•æ¡ SQL ä¸è¶…è¿‡è¯­å¥çš„æœ€å¤§é™åˆ¶ <code>max_allowed_packet</code> å¤§å°ï¼Œé»˜è®¤ä¸º 1 M ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æ–¹å¼çš„æ€§èƒ½å¯¹æ¯”ï¼Œå¯ä»¥çœ‹çœ‹ [ã€Š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cce617be9f9e">å®éªŒ]mybatisæ‰¹é‡æ’å…¥æ–¹å¼çš„æ¯”è¾ƒã€‹</a> ã€‚</p>
<h2 id="ä»‹ç»-MyBatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ"><a href="#ä»‹ç»-MyBatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ" class="headerlink" title="ä»‹ç» MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ"></a>ä»‹ç» MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ¦‚å¿µå’Œå®ç°åŸç†ï¼Ÿ</h2><p>å†…å®¹æœ‰äº›é•¿ï¼Œç›´æ¥å‚è§ <a target="_blank" rel="noopener" href="https://tech.meituan.com/mybatis_cache.html">ã€ŠèŠèŠ MyBatis ç¼“å­˜æœºåˆ¶ã€‹</a> ä¸€æ–‡ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/cache-package">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” ç¼“å­˜æ¨¡å—ã€‹</a> ã€‚</p>
<h2 id="Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Mybatis ä»…æ”¯æŒ association å…³è”å¯¹è±¡å’Œ collection å…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚å…¶ä¸­ï¼Œassociation æŒ‡çš„å°±æ˜¯<strong>ä¸€å¯¹ä¸€</strong>ï¼Œcollection æŒ‡çš„å°±æ˜¯<strong>ä¸€å¯¹å¤šæŸ¥è¯¢</strong>ã€‚</p>
<p>åœ¨ Mybatis é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½® <code>&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot; /&gt;</code> æ¥å¯ç”¨å»¶è¿ŸåŠ è½½çš„åŠŸèƒ½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå»¶è¿ŸåŠ è½½çš„åŠŸèƒ½æ˜¯<strong>å…³é—­</strong>çš„ã€‚</p>
<hr>
<p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨ CGLIB æˆ– Javassist( é»˜è®¤ ) åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ã€‚å½“è°ƒç”¨ä»£ç†å¯¹è±¡çš„å»¶è¿ŸåŠ è½½å±æ€§çš„ getting æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ã€‚æ¯”å¦‚è°ƒç”¨ <code>a.getB().getName()</code> æ–¹æ³•ï¼Œè¿›å…¥æ‹¦æˆªå™¨çš„ <code>invoke(...)</code> æ–¹æ³•ï¼Œå‘ç° <code>a.getB()</code> éœ€è¦å»¶è¿ŸåŠ è½½æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è” B å¯¹è±¡çš„ SQL ï¼ŒæŠŠ B æŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨<code>a.setB(b)</code> æ–¹æ³•ï¼Œäºæ˜¯ <code>a</code> å¯¹è±¡ <code>b</code> å±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆ<code>a.getB().getName()</code> æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p>
<p>å½“ç„¶äº†ï¼Œä¸å…‰æ˜¯ Mybatisï¼Œå‡ ä¹æ‰€æœ‰çš„åŒ…æ‹¬ Hibernate åœ¨å†…ï¼Œæ”¯æŒå»¶è¿ŸåŠ è½½çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<hr>
<p>è¿™å—çš„æºç è§£æï¼Œå¯è§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/executor-5">ã€Š ç²¾å°½ MyBatis æºç åˆ†æ â€”â€” SQL æ‰§è¡Œï¼ˆäº”ï¼‰ä¹‹å»¶è¿ŸåŠ è½½ã€‹</a> æ–‡ç« ã€‚</p>
<h2 id="Mybatis-èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚"><a href="#Mybatis-èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚" class="headerlink" title="Mybatis èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚"></a>Mybatis èƒ½å¦æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å—ï¼Ÿéƒ½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</h2><blockquote>
<p>è‰¿è‰¿ï¼šè¿™é“é¢˜æœ‰ç‚¹éš¾åº¦ã€‚ç†è§£å€’æ˜¯å¥½ç†è§£ï¼Œä¸»è¦é‚£å—æºç çš„å®ç°ï¼Œè‰¿è‰¿çœ‹çš„æœ‰ç‚¹æ‡µé€¼ã€‚å¤§ä½“çš„æ„æ€æ˜¯æ‡‚çš„ï¼Œä½†æ˜¯ä¸€äº›ç»†èŠ‚æ²¡æ‰£å®Œã€‚</p>
</blockquote>
<p>èƒ½ï¼ŒMybatis ä¸ä»…å¯ä»¥æ‰§è¡Œä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥æ‰§è¡Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šçš„å…³è”æŸ¥è¯¢ã€‚</p>
<blockquote>
<p>è‰¿è‰¿ï¼šä¸è¿‡è²Œä¼¼ï¼Œæˆ‘è‡ªå·±å®é™…å¼€å‘ä¸­ï¼Œè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢è‡ªå·±å»æŸ¥è¯¢å’Œæ‹¼æ¥æ˜ å°„çš„æ•°æ®ã€‚ğŸ˜ˆ</p>
</blockquote>
<ul>
<li>å¤šå¯¹ä¸€æŸ¥è¯¢ï¼Œå…¶å®å°±æ˜¯ä¸€å¯¹ä¸€æŸ¥è¯¢ï¼Œåªéœ€è¦æŠŠ <code>selectOne(...)</code> ä¿®æ”¹ä¸º <code>selectList(...)</code> å³å¯ã€‚æ¡ˆä¾‹å¯è§ <a target="_blank" rel="noopener" href="https://blog.csdn.net/xzm_rainbow/article/details/15336959">ã€ŠMyBatisï¼šå¤šå¯¹ä¸€è¡¨å…³ç³»è¯¦è§£ã€‹</a> ã€‚</li>
<li>å¤šå¯¹å¤šæŸ¥è¯¢ï¼Œå…¶å®å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ï¼Œåªéœ€è¦æŠŠ <code>#selectOne(...)</code> ä¿®æ”¹ä¸º <code>selectList(...)</code> å³å¯ã€‚æ¡ˆä¾‹å¯è§ <a target="_blank" rel="noopener" href="https://blog.csdn.net/eson_15/article/details/51655188">ã€Šã€MyBatiså­¦ä¹ 10ã€‘é«˜çº§æ˜ å°„ä¹‹å¤šå¯¹å¤šæŸ¥è¯¢ã€‹</a> ã€‚</li>
</ul>
<hr>
<p>å…³è”å¯¹è±¡æŸ¥è¯¢ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<blockquote>
<p>è‰¿è‰¿ï¼šæ‰€æœ‰çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå³ä¼šæœ‰å¥½å¤„ï¼Œåˆä¼šæœ‰åå¤„ã€‚å¾ˆéš¾å‡ºç°ï¼Œä¸€ä¸ªå®Œç¾çš„é“¶å¼¹æ–¹æ¡ˆã€‚</p>
</blockquote>
<ul>
<li>ä¸€ç§æ˜¯å•ç‹¬å‘é€ä¸€ä¸ª SQL å»æŸ¥è¯¢å…³è”å¯¹è±¡ï¼Œèµ‹ç»™ä¸»å¯¹è±¡ï¼Œç„¶åè¿”å›ä¸»å¯¹è±¡ã€‚å¥½å¤„æ˜¯å¤šæ¡ SQL åˆ†å¼€ï¼Œç›¸å¯¹ç®€å•ï¼Œåå¤„æ˜¯å‘èµ·çš„ SQL å¯èƒ½ä¼šæ¯”è¾ƒå¤šã€‚</li>
<li>å¦ä¸€ç§æ˜¯ä½¿ç”¨åµŒå¥—æŸ¥è¯¢ï¼ŒåµŒå¥—æŸ¥è¯¢çš„å«ä¹‰ä¸ºä½¿ç”¨ <code>join</code> æŸ¥è¯¢ï¼Œä¸€éƒ¨åˆ†åˆ—æ˜¯ A å¯¹è±¡çš„å±æ€§å€¼ï¼Œå¦å¤–ä¸€éƒ¨åˆ†åˆ—æ˜¯å…³è”å¯¹è±¡ B çš„å±æ€§å€¼ã€‚å¥½å¤„æ˜¯åªå‘ä¸€ä¸ª SQL æŸ¥è¯¢ï¼Œå°±å¯ä»¥æŠŠä¸»å¯¹è±¡å’Œå…¶å…³è”å¯¹è±¡æŸ¥å‡ºæ¥ï¼Œåå¤„æ˜¯ SQL å¯èƒ½æ¯”è¾ƒå¤æ‚ã€‚</li>
</ul>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>join</code> æŸ¥è¯¢å‡ºæ¥ 100 æ¡è®°å½•ï¼Œå¦‚ä½•ç¡®å®šä¸»å¯¹è±¡æ˜¯ 5 ä¸ªï¼Œè€Œä¸æ˜¯ 100 ä¸ªå‘¢ï¼Ÿå…¶å»é‡å¤çš„åŸç†æ˜¯ <code>&lt;resultMap&gt;</code> æ ‡ç­¾å†…çš„<code>&lt;id&gt;</code> å­æ ‡ç­¾ï¼ŒæŒ‡å®šäº†å”¯ä¸€ç¡®å®šä¸€æ¡è®°å½•çš„ <code>id</code> åˆ—ã€‚Mybatis ä¼šæ ¹æ®<code>&lt;id&gt;</code> åˆ—å€¼æ¥å®Œæˆ 100 æ¡è®°å½•çš„å»é‡å¤åŠŸèƒ½ï¼Œ<code>&lt;id&gt;</code> å¯ä»¥æœ‰å¤šä¸ªï¼Œä»£è¡¨äº†è”åˆä¸»é”®çš„è¯­æ„ã€‚</p>
<p>åŒæ ·ä¸»å¯¹è±¡çš„å…³è”å¯¹è±¡ï¼Œä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªåŸç†å»é‡å¤çš„ã€‚å°½ç®¡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸»å¯¹è±¡ä¼šæœ‰é‡å¤è®°å½•ï¼Œå…³è”å¯¹è±¡ä¸€èˆ¬ä¸ä¼šé‡å¤ã€‚ä¾‹å¦‚ï¼šä¸‹é¢ <code>join</code> æŸ¥è¯¢å‡ºæ¥6æ¡è®°å½•ï¼Œä¸€ã€äºŒåˆ—æ˜¯ Teacher å¯¹è±¡åˆ—ï¼Œç¬¬ä¸‰åˆ—ä¸º Student å¯¹è±¡åˆ—ã€‚Mybatis å»é‡å¤å¤„ç†åï¼Œç»“æœä¸º 1 ä¸ªè€å¸ˆå’Œ 6 ä¸ªå­¦ç”Ÿï¼Œè€Œä¸æ˜¯ 6 ä¸ªè€å¸ˆå’Œ 6 ä¸ªå­¦ç”Ÿã€‚</p>
<table>
<thead>
<tr>
<th>t_id</th>
<th>t_name</th>
<th>s_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>teacher</td>
<td>38</td>
</tr>
<tr>
<td>1</td>
<td>teacher</td>
<td>39</td>
</tr>
<tr>
<td>1</td>
<td>teacher</td>
<td>40</td>
</tr>
<tr>
<td>1</td>
<td>teacher</td>
<td>41</td>
</tr>
<tr>
<td>1</td>
<td>teacher</td>
<td>42</td>
</tr>
<tr>
<td>1</td>
<td>teacher</td>
<td>43</td>
</tr>
</tbody></table>
<h2 id="ç®€è¿°-Mybatis-çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ"><a href="#ç®€è¿°-Mybatis-çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ" class="headerlink" title="ç®€è¿° Mybatis çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ"></a>ç®€è¿° Mybatis çš„æ’ä»¶è¿è¡ŒåŸç†ï¼Ÿä»¥åŠå¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Ÿ</h2><p>Mybatis ä»…å¯ä»¥ç¼–å†™é’ˆå¯¹ ParameterHandlerã€ResultSetHandlerã€StatementHandlerã€Executor è¿™ 4 ç§æ¥å£çš„æ’ä»¶ã€‚</p>
<p>Mybatis ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†ï¼Œä¸ºéœ€è¦æ‹¦æˆªçš„æ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ä»¥å®ç°æ¥å£æ–¹æ³•æ‹¦æˆªåŠŸèƒ½ï¼Œæ¯å½“æ‰§è¡Œè¿™ 4 ç§æ¥å£å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šè¿›å…¥æ‹¦æˆªæ–¹æ³•ï¼Œå…·ä½“å°±æ˜¯ InvocationHandler çš„ <code>#invoke(...)</code>æ–¹æ³•ã€‚å½“ç„¶ï¼Œåªä¼šæ‹¦æˆªé‚£äº›ä½ æŒ‡å®šéœ€è¦æ‹¦æˆªçš„æ–¹æ³•ã€‚</p>
<hr>
<p>ç¼–å†™ä¸€ä¸ª MyBatis æ’ä»¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œå®ç° Mybatis çš„ Interceptor æ¥å£ï¼Œå¹¶å®ç° <code>#intercept(...)</code> æ–¹æ³•ã€‚</li>
<li>ç„¶åï¼Œåœ¨ç»™æ’ä»¶ç¼–å†™æ³¨è§£ï¼ŒæŒ‡å®šè¦æ‹¦æˆªå“ªä¸€ä¸ªæ¥å£çš„å“ªäº›æ–¹æ³•å³å¯</li>
<li>æœ€åï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä½ ç¼–å†™çš„æ’ä»¶ã€‚</li>
</ol>
<p>å…·ä½“çš„ï¼Œå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins">ã€ŠMyBatis å®˜æ–¹æ–‡æ¡£ â€”â€” æ’ä»¶ã€‹</a> ã€‚</p>
<hr>
<p>æ’ä»¶çš„è¯¦ç»†è§£æï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/plugin-1">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” æ’ä»¶ä½“ç³»ï¼ˆä¸€ï¼‰ä¹‹åŸç†ã€‹</a> ã€‚</p>
<h2 id="Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Mybatis ä½¿ç”¨ RowBounds å¯¹è±¡è¿›è¡Œåˆ†é¡µï¼Œå®ƒæ˜¯é’ˆå¯¹ ResultSet ç»“æœé›†æ‰§è¡Œçš„<strong>å†…å­˜åˆ†é¡µ</strong>ï¼Œè€Œé<strong>æ•°æ®åº“åˆ†é¡µ</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œå®é™…åœºæ™¯ä¸‹ï¼Œä¸é€‚åˆç›´æ¥ä½¿ç”¨ MyBatis åŸæœ‰çš„ RowBounds å¯¹è±¡è¿›è¡Œåˆ†é¡µã€‚è€Œæ˜¯ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li>åœ¨ SQL å†…ç›´æ¥ä¹¦å†™å¸¦æœ‰æ•°æ®åº“åˆ†é¡µçš„å‚æ•°æ¥å®Œæˆæ•°æ®åº“åˆ†é¡µåŠŸèƒ½</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆæ•°æ®åº“åˆ†é¡µã€‚</li>
</ul>
<p>è¿™ä¸¤è€…éƒ½æ˜¯åŸºäºæ•°æ®åº“åˆ†é¡µï¼Œå·®åˆ«åœ¨äºå‰è€…æ˜¯å·¥ç¨‹å¸ˆ<strong>æ‰‹åŠ¨</strong>ç¼–å†™åˆ†é¡µæ¡ä»¶ï¼Œåè€…æ˜¯æ’ä»¶<strong>è‡ªåŠ¨</strong>æ·»åŠ åˆ†é¡µæ¡ä»¶ã€‚</p>
<hr>
<p>åˆ†é¡µæ’ä»¶çš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨ Mybatis æä¾›çš„æ’ä»¶æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰åˆ†é¡µæ’ä»¶ã€‚åœ¨æ’ä»¶çš„æ‹¦æˆªæ–¹æ³•å†…ï¼Œæ‹¦æˆªå¾…æ‰§è¡Œçš„ SQL ï¼Œç„¶åé‡å†™ SQL ï¼Œæ ¹æ®dialect æ–¹è¨€ï¼Œæ·»åŠ å¯¹åº”çš„ç‰©ç†åˆ†é¡µè¯­å¥å’Œç‰©ç†åˆ†é¡µå‚æ•°ã€‚</p>
<p>ä¸¾ä¾‹ï¼š<code>SELECT * FROM student</code> ï¼Œæ‹¦æˆª SQL åé‡å†™ä¸ºï¼š<code>select * FROM student LIMI 0ï¼Œ10</code> ã€‚</p>
<p>ç›®å‰å¸‚é¢ä¸Šç›®å‰ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›çš„ MyBatis åˆ†é¡µæ’ä»¶æœ‰ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">Mybatis-PageHelper</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a></li>
</ul>
<p>ä»ç°åœ¨çœ‹æ¥ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a> é€æ­¥ä½¿ç”¨çš„æ›´åŠ å¹¿æ³›ã€‚</p>
<p>å…³äº MyBatis åˆ†é¡µæ’ä»¶çš„åŸç†æ·±å…¥ï¼Œå¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/plugin-2">ã€Šç²¾å°½ MyBatis æºç åˆ†æ â€”â€” æ’ä»¶ä½“ç³»ï¼ˆäºŒï¼‰ä¹‹ PageHelperã€‹</a> ã€‚</p>
<h2 id="MyBatis-ä¸-Hibernate-æœ‰å“ªäº›ä¸åŒï¼Ÿ"><a href="#MyBatis-ä¸-Hibernate-æœ‰å“ªäº›ä¸åŒï¼Ÿ" class="headerlink" title="MyBatis ä¸ Hibernate æœ‰å“ªäº›ä¸åŒï¼Ÿ"></a>MyBatis ä¸ Hibernate æœ‰å“ªäº›ä¸åŒï¼Ÿ</h2><p>Mybatis å’Œ Hibernate ä¸åŒï¼Œå®ƒ<strong>ä¸å®Œå…¨æ˜¯</strong>ä¸€ä¸ª ORM æ¡†æ¶ï¼Œå› ä¸ºMyBatis éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™ SQL è¯­å¥ã€‚ä¸è¿‡ MyBatis å¯ä»¥é€šè¿‡ XML æˆ–æ³¨è§£æ–¹å¼çµæ´»é…ç½®è¦è¿è¡Œçš„ SQL è¯­å¥ï¼Œå¹¶å°† Java å¯¹è±¡å’Œ SQL è¯­å¥æ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„ SQL ï¼Œæœ€åå°† SQL æ‰§è¡Œçš„ç»“æœå†æ˜ å°„ç”Ÿæˆ Java å¯¹è±¡ã€‚</p>
<p>Mybatis å­¦ä¹ é—¨æ§›ä½ï¼Œç®€å•æ˜“å­¦ï¼Œç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€ SQL ï¼Œå¯ä¸¥æ ¼æ§åˆ¶ SQL æ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ã€‚ä½†æ˜¯çµæ´»çš„å‰ææ˜¯ MyBatis æ— æ³•åšåˆ°æ•°æ®åº“æ— å…³æ€§ï¼Œå¦‚æœéœ€è¦å®ç°æ”¯æŒå¤šç§æ•°æ®åº“çš„è½¯ä»¶åˆ™éœ€è¦è‡ªå®šä¹‰å¤šå¥— SQL æ˜ å°„æ–‡ä»¶ï¼Œå·¥ä½œé‡å¤§ã€‚</p>
<p>Hibernate å¯¹è±¡/å…³ç³»æ˜ å°„èƒ½åŠ›å¼ºï¼Œæ•°æ®åº“æ— å…³æ€§å¥½ã€‚å¦‚æœç”¨ Hibernate å¼€å‘å¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚ä½†æ˜¯  Hibernate çš„ç¼ºç‚¹æ˜¯å­¦ä¹ é—¨æ§›é«˜ï¼Œè¦ç²¾é€šé—¨æ§›æ›´é«˜ï¼Œè€Œä¸”æ€ä¹ˆè®¾è®¡ O/R æ˜ å°„ï¼Œåœ¨æ€§èƒ½å’Œå¯¹è±¡æ¨¡å‹ä¹‹é—´å¦‚ä½•æƒè¡¡ï¼Œä»¥åŠæ€æ ·ç”¨å¥½  Hibernate éœ€è¦å…·æœ‰å¾ˆå¼ºçš„ç»éªŒå’Œèƒ½åŠ›æ‰è¡Œã€‚ </p>
<p>æ€»ä¹‹ï¼ŒæŒ‰ç…§ç”¨æˆ·çš„éœ€æ±‚åœ¨æœ‰é™çš„èµ„æºç¯å¢ƒä¸‹åªè¦èƒ½åšå‡ºç»´æŠ¤æ€§ã€æ‰©å±•æ€§è‰¯å¥½çš„è½¯ä»¶æ¶æ„éƒ½æ˜¯å¥½æ¶æ„ï¼Œæ‰€ä»¥æ¡†æ¶åªæœ‰é€‚åˆæ‰æ˜¯æœ€å¥½ã€‚ç®€å•æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li>Hibernate å±äºå…¨è‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ï¼Œä½¿ç”¨ Hibernate æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–è€…å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œå¯ä»¥æ ¹æ®å¯¹è±¡å…³ç³»æ¨¡å‹ç›´æ¥è·å–ã€‚</li>
<li>Mybatis å±äºåŠè‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ï¼Œåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ SQL æ¥å®Œæˆã€‚</li>
</ul>
<p>å¦å¤–ï¼Œåœ¨ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/96171e647885">ã€Šæµ…æ Mybatis ä¸ Hibernate çš„åŒºåˆ«ä¸ç”¨é€”ã€‹</a> æ–‡ç« ï¼Œä¹Ÿæ˜¯å†™çš„éå¸¸ä¸é”™çš„ã€‚</p>
<p>å½“ç„¶ï¼Œå®é™…ä¸Šï¼ŒMyBatis ä¹Ÿå¯ä»¥æ­é…è‡ªåŠ¨ç”Ÿæˆä»£ç çš„å·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="http://mp.baomidou.com/">MyBatis-Plus</a> æ¡†æ¶ï¼Œå·²ç»å†…ç½®å¸¸ç”¨çš„ SQL æ“ä½œï¼Œä¹Ÿæ˜¯éå¸¸ä¸é”™çš„ã€‚</p>
<h2 id="JDBC-ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ"><a href="#JDBC-ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ" class="headerlink" title="JDBC ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ"></a>JDBC ç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿ</h2><p>é—®é¢˜ä¸€ï¼šSQL è¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸”ä»£ç ä¼šæ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šå°† SQL è¯­å¥é…ç½®åœ¨ Mapper XML æ–‡ä»¶ä¸­ï¼Œä¸ Java ä»£ç åˆ†ç¦»ã€‚</p>
<hr>
<p>é—®é¢˜äºŒï¼šæ ¹æ®å‚æ•°ä¸åŒï¼Œæ‹¼æ¥ä¸åŒçš„ SQL è¯­å¥éå¸¸éº»çƒ¦ã€‚ä¾‹å¦‚ SQL è¯­å¥çš„ WHERE æ¡ä»¶ä¸ä¸€å®šï¼Œå¯èƒ½å¤šä¹Ÿå¯èƒ½å°‘ï¼Œå ä½ç¬¦éœ€è¦å’Œå‚æ•°ä¸€ä¸€å¯¹åº”ã€‚ </p>
<p>è§£å†³æ–¹å¼ï¼šMyBatis æä¾› <code>&lt;where /&gt;</code>ã€<code>&lt;if /&gt;</code> ç­‰ç­‰åŠ¨æ€è¯­å¥æ‰€éœ€è¦çš„æ ‡ç­¾ï¼Œå¹¶æ”¯æŒ OGNL è¡¨è¾¾å¼ï¼Œç®€åŒ–äº†åŠ¨æ€ SQL æ‹¼æ¥çš„ä»£ç ï¼Œæå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<hr>
<p>é—®é¢˜ä¸‰ï¼Œå¯¹ç»“æœé›†è§£æéº»çƒ¦ï¼ŒSQL å˜åŒ–å¯èƒ½å¯¼è‡´è§£æä»£ç å˜åŒ–ï¼Œä¸”è§£æå‰éœ€è¦éå†ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šMybatis è‡ªåŠ¨å°† SQL æ‰§è¡Œç»“æœæ˜ å°„æˆ Java å¯¹è±¡ã€‚</p>
<hr>
<p>é—®é¢˜å››ï¼Œæ•°æ®åº“é“¾æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹é€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå¦‚æœä½¿ç”¨æ•°æ®åº“é“¾æ¥æ± å¯è§£å†³æ­¤é—®é¢˜ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼šåœ¨ <code>mybatis-config.xml</code> ä¸­ï¼Œé…ç½®æ•°æ®é“¾æ¥æ± ï¼Œä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“é“¾æ¥ã€‚</p>
<p>ğŸ˜ˆ å½“ç„¶ï¼Œå³ä½¿ä¸ä½¿ç”¨ MyBatis ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚<br>å¦å¤–ï¼ŒMyBatis é»˜è®¤æä¾›äº†æ•°æ®åº“è¿æ¥æ± çš„å®ç°ï¼Œåªæ˜¯è¯´ï¼Œå› ä¸ºå…¶å®ƒå¼€æºçš„æ•°æ®åº“è¿æ¥æ± æ€§èƒ½æ›´å¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨ MyBatis è‡ªå¸¦çš„è¿æ¥æ± å®ç°ã€‚</p>
<h2 id="Mybatis-æ¯”-IBatis-æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mybatis-æ¯”-IBatis-æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mybatis æ¯” IBatis æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mybatis æ¯” IBatis æ¯”è¾ƒå¤§çš„å‡ ä¸ªæ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ</h2><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªé€‰æ‹©æ€§äº†è§£çš„é—®é¢˜ï¼Œå› ä¸ºå¯èƒ½ç°åœ¨å¾ˆå¤šé¢è¯•å®˜ï¼Œéƒ½æ²¡ç”¨è¿‡ IBatis æ¡†æ¶ã€‚</p>
</blockquote>
<ol>
<li>æœ‰æ¥å£ç»‘å®šï¼ŒåŒ…æ‹¬æ³¨è§£ç»‘å®š SQL å’Œ XML ç»‘å®š SQL ã€‚</li>
<li>åŠ¨æ€ SQL ç”±åŸæ¥çš„èŠ‚ç‚¹é…ç½®å˜æˆ OGNL è¡¨è¾¾å¼ã€‚</li>
<li>åœ¨ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„æ—¶å€™ï¼Œå¼•è¿›äº† <code>association</code> ï¼Œåœ¨ä¸€å¯¹å¤šçš„æ—¶å€™ï¼Œå¼•å…¥äº† <code>collection</code>èŠ‚ç‚¹ï¼Œä¸è¿‡éƒ½æ˜¯åœ¨ <code>&lt;resultMap /&gt;</code> é‡Œé¢é…ç½®ã€‚</li>
</ol>
<h2 id="Mybatis-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ-A-æ ‡ç­¾é€šè¿‡-include-å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB-æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨-A-æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ"><a href="#Mybatis-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ-A-æ ‡ç­¾é€šè¿‡-include-å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB-æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨-A-æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ" class="headerlink" title="Mybatis æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ A æ ‡ç­¾é€šè¿‡ include å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨ A æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ"></a>Mybatis æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœ A æ ‡ç­¾é€šè¿‡ include å¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒB æ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨ A æ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ</h2><blockquote>
<p>è€è‰¿è‰¿ï¼šè¿™é“é¢˜ç›®ï¼Œå·²ç»å’Œæºç å®ç°ï¼Œæœ‰ç‚¹å…³ç³»äº†ã€‚</p>
</blockquote>
<p>è™½ç„¶ Mybatis è§£æ XML æ˜ å°„æ–‡ä»¶æ˜¯<strong>æŒ‰ç…§é¡ºåº</strong>è§£æçš„ã€‚ä½†æ˜¯ï¼Œè¢«å¼•ç”¨çš„ B æ ‡ç­¾ä¾ç„¶å¯ä»¥å®šä¹‰åœ¨ä»»ä½•åœ°æ–¹ï¼ŒMybatis éƒ½å¯ä»¥æ­£ç¡®è¯†åˆ«ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— éœ€æŒ‰ç…§é¡ºåºï¼Œè¿›è¡Œå®šä¹‰</strong>ã€‚</p>
<p>åŸç†æ˜¯ï¼ŒMybatis è§£æ A æ ‡ç­¾ï¼Œå‘ç° A æ ‡ç­¾å¼•ç”¨äº† B æ ‡ç­¾ï¼Œä½†æ˜¯ B æ ‡ç­¾å°šæœªè§£æåˆ°ï¼Œå°šä¸å­˜åœ¨ï¼Œæ­¤æ—¶ï¼ŒMybatis ä¼šå°† A æ ‡ç­¾æ ‡è®°ä¸º<strong>æœªè§£æçŠ¶æ€</strong>ã€‚ç„¶åï¼Œç»§ç»­è§£æä½™ä¸‹çš„æ ‡ç­¾ï¼ŒåŒ…å« B æ ‡ç­¾ï¼Œå¾…æ‰€æœ‰æ ‡ç­¾è§£æå®Œæ¯•ï¼ŒMybatis ä¼šé‡æ–°è§£æé‚£äº›è¢«æ ‡è®°ä¸ºæœªè§£æçš„æ ‡ç­¾ï¼Œæ­¤æ—¶å†è§£æAæ ‡ç­¾æ—¶ï¼ŒB æ ‡ç­¾å·²ç»å­˜åœ¨ï¼ŒA æ ‡ç­¾ä¹Ÿå°±å¯ä»¥æ­£å¸¸è§£æå®Œæˆäº†ã€‚</p>
<p>å¯èƒ½æœ‰ä¸€äº›ç»•ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/MyBatis/builder-package-1">ã€Šç²¾å°½ MyBatis æºç è§£æ â€”â€” MyBatis åˆå§‹åŒ–ï¼ˆä¸€ï¼‰ä¹‹åŠ è½½ mybatis-configã€‹</a> ã€‚</p>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬åœ¨å¼•ç”³ä¸€ä¸ªé—®é¢˜ï¼ŒSpring IOC ä¸­ï¼Œå­˜åœ¨äº’ç›¸ä¾èµ–çš„ Bean å¯¹è±¡ï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿç­”æ¡ˆè§ <a target="_blank" rel="noopener" href="http://svip.iocoder.cn/Spring/IoC-get-Bean-createBean-5/">ã€Šã€æ­»ç£• Springã€‘â€”â€” IoC ä¹‹åŠ è½½ Beanï¼šåˆ›å»º Beanï¼ˆäº”ï¼‰ä¹‹å¾ªç¯ä¾èµ–å¤„ç†ã€‹</a> ã€‚</p>
<h2 id="ç®€è¿°-Mybatis-çš„-XML-æ˜ å°„æ–‡ä»¶å’Œ-Mybatis-å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ"><a href="#ç®€è¿°-Mybatis-çš„-XML-æ˜ å°„æ–‡ä»¶å’Œ-Mybatis-å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ" class="headerlink" title="ç®€è¿° Mybatis çš„ XML æ˜ å°„æ–‡ä»¶å’Œ Mybatis å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ"></a>ç®€è¿° Mybatis çš„ XML æ˜ å°„æ–‡ä»¶å’Œ Mybatis å†…éƒ¨æ•°æ®ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Ÿ</h2><blockquote>
<p>è€è‰¿è‰¿ï¼šè¿™é“é¢˜ç›®ï¼Œå·²ç»å’Œæºç å®ç°ï¼Œæœ‰ç‚¹å…³ç³»äº†ã€‚</p>
</blockquote>
<p>Mybatis å°†æ‰€æœ‰ XML é…ç½®ä¿¡æ¯éƒ½å°è£…åˆ° All-In-One é‡é‡çº§å¯¹è±¡Configurationå†…éƒ¨ã€‚</p>
<p>åœ¨ XML Mapper æ–‡ä»¶ä¸­ï¼š</p>
<ul>
<li><code>&lt;parameterMap&gt;</code> æ ‡ç­¾ï¼Œä¼šè¢«è§£æä¸º ParameterMap å¯¹è±¡ï¼Œå…¶æ¯ä¸ªå­å…ƒç´ ä¼šè¢«è§£æä¸º ParameterMapping å¯¹è±¡ã€‚</li>
<li><code>&lt;resultMap&gt;</code> æ ‡ç­¾ï¼Œä¼šè¢«è§£æä¸º ResultMap å¯¹è±¡ï¼Œå…¶æ¯ä¸ªå­å…ƒç´ ä¼šè¢«è§£æä¸º ResultMapping å¯¹è±¡ã€‚</li>
<li>æ¯ä¸€ä¸ª <code>&lt;select&gt;</code>ã€<code>&lt;insert&gt;</code>ã€<code>&lt;update&gt;</code>ã€<code>&lt;delete&gt;</code> æ ‡ç­¾ï¼Œå‡ä¼šè¢«è§£æä¸ºä¸€ä¸ª MappedStatement å¯¹è±¡ï¼Œæ ‡ç­¾å†…çš„ SQL ä¼šè¢«è§£æä¸ºä¸€ä¸ª BoundSql å¯¹è±¡ã€‚</li>
</ul>
<h2 id="666-å½©è›‹"><a href="#666-å½©è›‹" class="headerlink" title="666. å½©è›‹"></a>666. å½©è›‹</h2><p>å‚è€ƒä¸æ¨èå¦‚ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li>ç¥–å¤§ä¿Š <a target="_blank" rel="noopener" href="https://my.oschina.net/zudajun/blog/747682">ã€ŠMybatis3.4.xæŠ€æœ¯å†…å¹•ï¼ˆäºŒåä¸‰ï¼‰ï¼šMybatisé¢è¯•é—®é¢˜é›†é”¦ï¼ˆå¤§ç»“å±€ï¼‰ã€‹</a></li>
<li>Java3y <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013678579">ã€ŠMybatis å¸¸è§é¢è¯•é¢˜ã€‹</a></li>
<li>Homiss <a target="_blank" rel="noopener" href="https://github.com/Homiss/Java-interview-questions/blob/master/%E6%A1%86%E6%9E%B6/MyBatis%E9%9D%A2%E8%AF%95%E9%A2%98.md">ã€ŠMyBatis é¢è¯•é¢˜ã€‹</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2016/10/12/%E7%B2%BE%E5%B0%BD%20MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/">http://example.com/2016/10/12/%E7%B2%BE%E5%B0%BD%20MyBatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95/">é¢è¯•</a><a class="post-meta__tags" href="/tags/MyBatis/">MyBatis</a></div><div class="post_share"><div class="social-share" data-image="http://cdn.tuwenbin.vip/1557628307196cddab5c76e5e5229b884f2e10f3.jpg%401320w_744h.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2016/10/12/%E7%B2%BE%E5%B0%BD%20Java%E3%80%90%E5%9F%BA%E7%A1%80%E3%80%91%E9%9D%A2%E8%AF%95%E9%A2%98/"><img class="prev-cover" src="https://cdn.tuwenbin.vip/1d65a08a66698df05dc627c47aa763d7a2e86844.png%401320w_742h.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">ç²¾å°½ Javaã€åŸºç¡€ã€‘é¢è¯•é¢˜</div></div></a></div><div class="next-post pull-right"><a href="/2016/10/12/%E7%B2%BE%E5%B0%BD%20Spring%20Boot%20%E9%9D%A2%E8%AF%95%E9%A2%98/"><img class="next-cover" src="http://cdn.tuwenbin.vip/1769756aa42aba34c11a8375fa0564ec07552ee4.jpg%401320w_742h.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">ç²¾å°½ Spring Boot é¢è¯•é¢˜</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2018/10/12/ç²¾å°½ Spring MVC é¢è¯•é¢˜/" title="ç²¾å°½ Spring MVC é¢è¯•é¢˜"><img class="cover" src="http://cdn.tuwenbin.vip/10afefd0ac0dfb64fd5da6cbad5641b54354e9c8.jpg%401320w_826h.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-12</div><div class="title">ç²¾å°½ Spring MVC é¢è¯•é¢˜</div></div></a></div><div><a href="/2016/10/12/ç²¾å°½ Javaã€åŸºç¡€ã€‘é¢è¯•é¢˜/" title="ç²¾å°½ Javaã€åŸºç¡€ã€‘é¢è¯•é¢˜"><img class="cover" src="https://cdn.tuwenbin.vip/1d65a08a66698df05dc627c47aa763d7a2e86844.png%401320w_742h.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class="title">ç²¾å°½ Javaã€åŸºç¡€ã€‘é¢è¯•é¢˜</div></div></a></div><div><a href="/2016/10/12/ç²¾å°½ Spring Boot é¢è¯•é¢˜/" title="ç²¾å°½ Spring Boot é¢è¯•é¢˜"><img class="cover" src="http://cdn.tuwenbin.vip/1769756aa42aba34c11a8375fa0564ec07552ee4.jpg%401320w_742h.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class="title">ç²¾å°½ Spring Boot é¢è¯•é¢˜</div></div></a></div><div><a href="/2016/10/12/ç²¾å°½ Redis é¢è¯•é¢˜/" title="ç²¾å°½ Redis é¢è¯•é¢˜"><img class="cover" src="https://cdn.tuwenbin.vip/2c33127e3f122ab283386f12c3f676702e1ca429.png%401320w_952h.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class="title">ç²¾å°½ Redis é¢è¯•é¢˜</div></div></a></div><div><a href="/2016/10/12/ç²¾å°½ Javaã€è™šæ‹Ÿæœºã€‘é¢è¯•é¢˜/" title="ç²¾å°½ Javaã€è™šæ‹Ÿæœºã€‘é¢è¯•é¢˜"><img class="cover" src="https://cdn.tuwenbin.vip/4589f71b8ab8dd887f5795ccfbe49c623573bd1b.jpg%401320w_910h.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class="title">ç²¾å°½ Javaã€è™šæ‹Ÿæœºã€‘é¢è¯•é¢˜</div></div></a></div><div><a href="/2016/10/12/ç²¾å°½ Spring é¢è¯•é¢˜/" title="ç²¾å°½ Spring é¢è¯•é¢˜"><img class="cover" src="https://cdn.tuwenbin.vip/132c06612efd0940712af92fefce602e57805aaf.jpg%401320w_742h.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-12</div><div class="title">ç²¾å°½ Spring é¢è¯•é¢˜</div></div></a></div></div></div></article></main><footer id="footer" style="background-image: url(http://cdn.tuwenbin.vip/1557628307196cddab5c76e5e5229b884f2e10f3.jpg%401320w_744h.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn"><img class="icp-icon" src="/img/icp.png"/><span>èµ£ICPå¤‡2020011086å·</span></a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script><script src="js/jquery-3.1.1.js"></script><script src="js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></div></body></html>